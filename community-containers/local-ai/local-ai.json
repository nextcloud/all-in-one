{
    "aio_services_v1": [
        {
            "container_name": "nextcloud-aio-local-ai",
            "display_name": "Local AI",
            "documentation": "https://github.com/nextcloud/all-in-one/tree/main/community-containers/local-ai",
            "image": "ghcr.io/docjyj/aio-local-ai-vulkan",
            "image_tag": "v1",
            "internal_port": "10078",
            "restart": "unless-stopped",
            "environment": [
                "TZ=%TIMEZONE%",
                "LOCALAI_API_KEY=%LOCALAI_API_KEY%",
                "LOCALAI_ADDRESS=:10078",
                "LOCALAI_CONFIG_DIR=/configuration",
                "LOCALAI_MODEL_PATH=/models",
                "LOCALAI_BACKEND_PATH=/backends"
            ],
            "ports": [
                {
                  "ip_binding": "%APACHE_IP_BINDING%",
                  "port_number": "10078",
                  "protocol": "tcp"
                }
            ],
            "volumes": [
                {
                  "source": "nextcloud_aio_localai_configuration",
                  "destination": "/configuration",
                  "writeable": true
                },
                {
                    "source": "nextcloud_aio_localai_models",
                    "destination": "/models",
                    "writeable": true
                },
                {
                    "source": "nextcloud_aio_localai_backends",
                    "destination": "/backends",
                    "writeable": true
                }
            ],
            "secrets": [
                "LOCALAI_API_KEY"
            ],
            "ui_secret": "LOCALAI_API_KEY",
            "devices": [
                "/dev/dri"
            ],
            "nextcloud_exec_commands": [
                "php /var/www/html/occ app:install integration_openai",
                "php /var/www/html/occ app:enable integration_openai",
                "php /var/www/html/occ config:app:set integration_openai url --value http://nextcloud-aio-local-ai:10078",
                "php /var/www/html/occ config:app:set integration_openai api_key --value %LOCALAI_API_KEY%",
                "php /var/www/html/occ app:install assistant",
                "php /var/www/html/occ app:enable assistant"
            ],
            "backup_volumes": [
              "nextcloud_aio_localai_configuration"
            ]
        }
    ]
}
